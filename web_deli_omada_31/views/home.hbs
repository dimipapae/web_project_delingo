

<div id="logo">Deli&Go</div>

{{#unless userEmail}}
{{#unless userArea}}
<!-- Modal Î³Î¹Î± ÎµÏ€Î¹Î»Î¿Î³Î® Ï€ÎµÏÎ¹Î¿Ï‡Î®Ï‚ -->
<div id="area-modal" class="modal2">
  <div class="modal-content2">
    <h2>Î•Ï€Î¯Î»ÎµÎ¾Îµ Ï„Î·Î½ Ï€ÎµÏÎ¹Î¿Ï‡Î® ÏƒÎ¿Ï…</h2>
    <select id="area-select">
      <option value="" disabled selected>-- Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Ï€ÎµÏÎ¹Î¿Ï‡Î® --</option>
      {{#each patrasAreas}}
        <option value="{{this}}">{{this}}</option>
      {{/each}}
    </select>
    <button id="confirm-area">Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±</button>
  </div>
</div>
{{/unless}}
{{/unless}}


{{#if userEmail}}
  <div id="user-info-box">
    <div class="user-row">
      <img src="/images/user_email.jpg" alt="Email Icon" class="user-icon" />
      <span>{{userEmail}}</span>
    </div>
    <div class="user-row">
      <img src="/images/user_location.png" alt="Location Icon" class="user-icon" />
      <div class="user-address-info">
        <strong>Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ· Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚:</strong>
        <p>{{userAddress}}, {{userArea}}</p>
      </div>
    </div>
    <div class="my-orders-link">
        <a href="/orders" style="color: red; font-weight: bold;">ÎŸÎ¹ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯ÎµÏ‚ ÎœÎ¿Ï…</a>
      </div>
    <div class="my-orders-link">
      <a href="/favorites" style="color: red; font-weight: bold;">Î‘Î³Î±Ï€Î·Î¼Î­Î½Î± ÎšÎ±Ï„Î±ÏƒÏ„Î®Î¼Î±Ï„Î±</a>
    </div>
  </div>
  {{/if}}

  {{#if userArea}}
  <!--  ÎšÎ¿Ï…Î¼Ï€Î¯ Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚ -->
      <div class="logout-container">
        <a href="/logout" id="logout-link">
          {{#if isGuest}}ÎˆÎ¾Î¿Î´Î¿Ï‚{{else}}Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·{{/if}}
        </a>
      </div>
{{/if}}


<div class="home-container">
  <p class="user-address" id="user-address"></p>


<div class="food-section" style="position: relative;">
  <input type="text" id="search-box" placeholder="ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·" autocomplete="off" />

  <!-- Î•Î´Ï Î¸Î± ÎµÎ¼Ï†Î±Î½Î¯Î¶Î¿Î½Ï„Î±Î¹ Ï„Î± Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± -->
    <div id="search-results" ></div>
    <script src="/js/search.js"></script>


    <div class="food-categories"> 
      <div class="category">
        <img src="/images/kafes.png" alt="ÎšÎ±Ï†Î­Ï‚" />
        <span>ÎšÎ±Ï†Î­Î´ÎµÏ‚</span>
      </div>
      <div class="category">
        <img src="/images/souvlaki.png" alt="Î£Î¿Ï…Î²Î»Î¬ÎºÎ¹" />
        <span>Î£Î¿Ï…Î²Î»Î¬ÎºÎ¹Î±</span>
      </div>
      <div class="category">
        <img src="/images/pizza.png" alt="Î Î¯Ï„ÏƒÎ±" />
        <span>Î Î¯Ï„ÏƒÎ±</span>
      </div>
      <div class="category">
        <img src="/images/burger.png" alt="ÎœÏ€Î­ÏÎ³ÎºÎµÏ" />
        <span>ÎœÏ€Î­ÏÎ³ÎºÎµÏ</span>
      </div>
      <div class="category">
        <img src="/images/kineziko.png" alt="ÎšÎ¹Î½Î­Î¶Î¹ÎºÎ¿" />
        <span>ÎšÎ¹Î½Î­Î¶Î¹ÎºÎ¿</span>
      </div>
      <div class="category">
        <img src="/images/mexikaniko.png" alt="ÎœÎµÎ¾Î¹ÎºÎ¬Î½Î¹ÎºÎ¿" />
        <span>ÎœÎµÎ¾Î¹ÎºÎ¬Î½Î¹ÎºÎ¿</span>
      </div>
      <div class="category">
        <img src="/images/crepes.png" alt="ÎšÏÎ­Ï€Î±" />
        <span>ÎšÏÎ­Ï€Î±</span>
      </div>
      <div class="category">
        <img src="/images/glyka.png" alt="Î“Î»Ï…ÎºÏŒ" />
        <span>Î“Î»Ï…ÎºÏŒ</span>
      </div>
    </div>
  </div>
</div>
</div>



<script>
  document.querySelectorAll('.food-categories .category').forEach(el => {
    el.addEventListener('click', () => {
      const categoryName = el.querySelector('span').innerText.trim();
      const encodedCategory = encodeURIComponent(categoryName);
      window.location.href = `/category/${encodedCategory}`;
    });
  });


 //  Logout functionality
  const logoutBtn = document.getElementById('logout-button');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
      window.location.href = '/logout';
    });
  }
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('area-modal');
    const select = document.getElementById('area-select');
    const confirmBtn = document.getElementById('confirm-area');

    if (modal) {
      modal.style.display = 'flex'; // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎµ modal

      confirmBtn.addEventListener('click', () => {
        const area = select.value;
        if (!area) return alert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¯Î»ÎµÎ¾Îµ Î¼Î¯Î± Ï€ÎµÏÎ¹Î¿Ï‡Î®.');

        // Î£Ï„ÎµÎ¯Î»Îµ POST request Î³Î¹Î± Î½Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏ…Ï„ÎµÎ¯ Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬ ÏƒÏ„Î¿ session
        fetch('/guest/area', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ area })
        })
        .then(res => {
          if (res.ok) {
            modal.style.display = 'none';
            location.reload(); 
          } else {
            alert('Î£Ï†Î¬Î»Î¼Î± ÎºÎ±Ï„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï€ÎµÏÎ¹Î¿Ï‡Î®Ï‚.');
          }
        });
      });
    }
  });
</script>
